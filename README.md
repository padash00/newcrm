# CRM для компьютерного клуба

Этот репозиторий содержит основу для разработки web-CRM системы управления
компьютерным клубом. Проект разбит на два основных модуля:

- **backend/** — Flask + REST API
- **frontend/** — Next.js (React + Tailwind)

Подробное описание структуры базы данных, маршрутов API и используемых
зависимостей находится в [docs/design.md](docs/design.md).

Бэкенд использует JWT авторизацию. Для входа отправьте `POST /api/auth/login`
с `username` и `password`. Создать пользователя можно через
`POST /api/auth/register`. При необходимости выйти — `POST /api/auth/logout`.
Используйте полученный токен в заголовке `Authorization` для доступа к
защищённым маршрутам (например `/api/protected`). При логине API также
возвращает роль пользователя, она
используется во фронтенде для ограничения доступа к разделам.

Реализованы базовые маршруты управления клиентами, сменами, сессиями,
кассой, зонами и компьютерами, тарифами и акциями. Добавлены маршруты
для бронирований.
Можно массово загружать клиентов из Excel через `/api/clients/import_excel` и
выгружать отчёт по сменам в формате Excel через `/api/shifts/export_excel`.
Во фронтенде кроме страниц входа и панели `/dashboard` доступны списки
`/clients`, `/sessions`, `/shifts`, `/bookings`, отчёты `/reports` и
страница аналитики `/analytics`. Есть форма закрытия кассы `/cash` и
запуска сессии `/sessions/start`.
Поддерживаются роли `admin`, `operator` и `tech`, которые ограничивают
доступ к разделам.

## Переменные окружения

Скопируйте файл `.env.example` в `.env` и укажите значения:

- `JWT_SECRET_KEY` — ключ подписи JWT
- `SQLALCHEMY_DATABASE_URI` — строка подключения к базе данных
- `CORS_ORIGINS` — список доменов фронтенда через запятую

## Запуск через Docker

В репозитории есть `docker-compose.yml`, который поднимает backend с
Gunicorn и фронтенд под Nginx. Для запуска выполните:

```bash
docker-compose up --build
```

По умолчанию приложения будут доступны на
`http://localhost:8000` (API) и `http://localhost:3000` (фронтенд).
Для продакшн‑сборки укажите PostgreSQL в `SQLALCHEMY_DATABASE_URI` и
разместите сервис на нужном домене.
